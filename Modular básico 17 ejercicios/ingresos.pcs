// ========== FUNCIONES ==========

// Funci√≥n para leer ingresos con validaci√≥n
Funcion ingresos <- LeerIngresos(T)
    Escribir "=== INGRESO DE DATOS FINANCIEROS ==="
    Escribir "Ingrese el total de ingresos:"
    Leer ingresos
    
    Mientras ingresos < 0 Hacer
        Escribir "Error: Los ingresos no pueden ser negativos"
        Escribir "Ingrese el total de ingresos:"
        Leer ingresos
    FinMientras
FinFuncion

// Funci√≥n para calcular ganancia neta y margen
Funcion ganancia <- CalcularGananciaNeta(ingresos, gastos, margen Por Referencia)
    ganancia <- ingresos - gastos
    
    Si ingresos > 0 Entonces
        margen <- (ganancia / ingresos) * 100
    SiNo
        margen <- 0
    FinSi
FinFuncion

// Funci√≥n para mostrar an√°lisis financiero completo
Funcion MostrarAnalisisFinanciero(ingresos, gastos, ganancia, margen)
    Escribir ""
    Escribir "=== AN√ÅLISIS FINANCIERO ==="
    Escribir "--------------------------------"
    Escribir "Ingresos totales:    $", ingresos
    Escribir "Gastos totales:      $", gastos
    Escribir "--------------------------------"
    
    Si ganancia >= 0 Entonces
        Escribir "GANANCIA NETA:       $", ganancia, " ‚úÖ"
        Escribir "Margen de ganancia:  ", margen, "%"
        
        // An√°lisis del margen
        Si margen >= 30 Entonces
            Escribir "üéâ EXCELENTE RENTABILIDAD - Margen superior al 30%"
        SiNo
            Si margen >= 20 Entonces
                Escribir "üëç MUY BUENA RENTABILIDAD - Margen entre 20% y 30%"
            SiNo
                Si margen >= 10 Entonces
                    Escribir "‚úÖ RENTABILIDAD ACEPTABLE - Margen entre 10% y 20%"
                SiNo
                    Si margen > 0 Entonces
                        Escribir "‚ö†Ô∏è RENTABILIDAD BAJA - Margen menor al 10%"
                        Escribir "Se recomienda optimizar gastos o aumentar ingresos"
                    SiNo
                        Escribir "üü∞ PUNTO DE EQUILIBRIO - Sin ganancias ni p√©rdidas"
                    FinSi
                FinSi
            FinSi
        FinSi
    SiNo
        Escribir "P√âRDIDA NETA:        $", ganancia * (-1), " ‚ùå"
        Escribir "Porcentaje de p√©rdida: ", margen * (-1), "%"
        Escribir "üìä SITUACI√ìN CR√çTICA - Se requiere revisi√≥n urgente de estrategia"
    FinSi
    
    Escribir ""
    Escribir "=== RECOMENDACIONES ==="
    Si ganancia < 0 Entonces
        Escribir "‚Ä¢ Reducir gastos operativos"
        Escribir "‚Ä¢ Incrementar estrategias de ventas"
        Escribir "‚Ä¢ Revisar precios de productos/servicios"
    SiNo
        Si margen < 15 Entonces
            Escribir "‚Ä¢ Buscar optimizaci√≥n de gastos"
            Escribir "‚Ä¢ Evaluar oportunidades de crecimiento"
        SiNo
            Escribir "‚Ä¢ Mantener la estrategia actual"
            Escribir "‚Ä¢ Considerar reinversi√≥n para crecimiento"
        FinSi
    FinSi
FinFuncion

// ========== PROGRAMA PRINCIPAL ==========

Algoritmo GananciaNeta
    Definir ingresos, gastos, ganancia, margen Como Real
    
    Escribir "=== CALCULADORA DE GANANCIA NETA ==="
    Escribir "Programa para calcular y analizar la rentabilidad del negocio"
    Escribir ""
    
    ingresos <- LeerIngresos(T)
    
    Escribir "Ingrese el total de gastos:"
    Leer gastos
    
    Mientras gastos < 0 Hacer
        Escribir "Error: Los gastos no pueden ser negativos"
        Escribir "Ingrese el total de gastos:"
        Leer gastos
    FinMientras
    
    ganancia <- CalcularGananciaNeta(ingresos, gastos, margen)
    MostrarAnalisisFinanciero(ingresos, gastos, ganancia, margen)
    
    Escribir ""
    Escribir "¬°Gracias por usar el analizador financiero!"
    
FinAlgoritmo
